<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0" />
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<meta name="format-detection" content="telephone=no">
		<title>印刷通-报价</title>
	    <link rel="stylesheet" type="text/css" href="css/rem.css"/>		<link rel="stylesheet" type="text/css" href="css/mui.min.css"/>
		<link rel="stylesheet" type="text/css" href="css/initialization1.css?v=Date.parse(new Date())"/>		<style type="text/css">			body{				background-color: #FFFFFF;			}			.mui-table-view:before,.mui-table-view:after{				height: 0px;			}			.mui-table-view a span{				display: inline-block;				width: 25%;			}			.mui-table-view a span:nth-child(2){				width: 15%;			}			.mui-table-view a span:nth-child(3){				width: 27%;			}			.mui-table-view a span:nth-child(4){				width: 33%;			}			.mui-table-view .mui-collapse-content span{				display: inline-block;				width: 25%;			}			#otherPaper{				line-height: 40px;				font-size: 24px;				text-align: center;				text-decoration: underline;			}			.title{				padding: 10px 10px 5px 6px ;			}			input{							}			.papercol input{				border: 0px;				padding: 0;				font-size: 30px;				margin-bottom: 2px;				vertical-align: bottom;				height: 30px;				line-height: 30px;			}			.papercol{				height: 70px;				padding: 3.0rem 0rem 0rem 1.5rem;			}			.specs{				font-size: 30px;			}			.specsnum{				font-size: 12px;			}			.active{				color: #FF6600;				background-color: #FFFFFF !important; 			}			#sureButton{				margin-top: 30px;			}			#customPapers{				position: absolute;				background-color: #FFFFFF;				clear: both;				top: 30px;				right: 0px;				width: 250px;							}			#customPapers div{				border-left: 1px solid #7f7f7f;				border-right: 1px solid #7f7f7f;				border-bottom: 1px solid #7f7f7f;							}			#customPapers div:nth-child(1){				border-top: 1px solid #7f7f7f;			}			#customPapers  span{				padding: 5px;			}			#customPapers p:nth-child(1){				padding-left: 5px;				position: relative;			}						#customPapers img{				display: inline-block;				width: 24px;				position: absolute;				right: 3px;				top: 3px;			}			.special{				margin-left: 37px;			    position: relative;			    top: 10px;			}			.specsnum input{				width: 60px;				font-size: 20px;				height: 16px;				margin-left: 10px;			}		</style>
	</head>
	<body>
		<div class="select-papers layer-custom" id="selectPapers">			<div class="">				<div class="papercol">						<font>名称</font>						<input type="text" name="papername" class="" id="name" value="" />				</div>				<div class="papercol">					<font>颜色</font>					<input name="color" type="text" class="" id="color" value="" />				</div>				<div class="papercol">					<font>克重</font>					<input style="width: 20%;" name="KeZhong" type="text" class="" id="KeZhong" value="" />克				</div>				<div class="papercol" style="height: 120px;">					<font>规格</font>					<span class="active specschoose" index='0'>						<span class="specs">标规</span>						<span class="specsnum">(787X1092)</span>					</span>					<span class="specschoose" index="1">						<span class="specs">大规</span>						<span class="specsnum">(889X1194)</span>					</span>					<span class="specschoose special" index="2">						<span class="specs specialnum" style="position: relative;top: 5px;">特规</span>						<span class="specsnum specialhidenum" >							<input type="number" name="selfPaperLength" id="selfPaperLength" value="" />							<span style="font-size: 1.5rem;">X</span>							<input type="number" name="selfPaperWidth" id="selfPaperWidth" value="" />						</span>					</span>				</div>				<div class="papercol price">					<font>价格</font>					<input style="width: 20%;" type="number" name="price" id="price" value="" />/张				</div>							</div>
			<button type="button" class="sure-button" id="sureButton">确认</button>
		</div>		
		<div class="layer-custom " id="customPapers">
			<!--<div papername="蒙肯滑面" color="米白" KeZhong="100" GuiGe="标规" price="0.80">
				<p>蒙肯滑面 <img src="img/cookie.png"/></p>
				<p><span>米白</span> <span>100克</span><span>标规</span><span>0.80/张</span></p>
			
			</div>
			<div papername="蒙肯滑面" color="米白" KeZhong="200" GuiGe="大规" price="0.90">
				<p>蒙肯滑面<img src="img/cookie.png"/></p>
				<p><span>米白</span> <span>200克</span><span>大规</span><span>0.90/张</span></p>
				
			</div>
			<div papername="蒙肯滑面" color="米白" KeZhong="300" GuiGe="标规" price="1.80">
				<p>蒙肯滑面<img src="img/cookie.png"/></p>
				<p><span>米白</span> <span>300克</span><span>标规</span><span>1.80/张</span></p>
			</div>
			<div papername="蒙肯滑面" color="米白" KeZhong="400" GuiGe="大规" price="1.90">
				<p>蒙肯滑面<img src="img/cookie.png"/></p>
				<p><span>米白</span> <span>400克</span><span>大规</span><span>1.90/张</span></p>
			</div>
			<div papername="蒙肯滑面" color="米白" KeZhong="500" GuiGe="标规" price="0.70">
				<p>蒙肯滑面<img src="img/cookie.png"/></p>
				<p><span>米白</span> <span>500克</span><span>标规</span><span>0.70/张</span></p>
			</div>-->
		</div>		
	</body>
	<script type="text/javascript" src="js/jquery.min.js"></script>	<script src="js/mui.min.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript" src="js/layer3.0.1/layer.js"></script>	<script type="text/javascript">		const ajaxUrlPath = "http://mobile.zhiyin.1000ways.cn";		var index = parent.layer.getFrameIndex(window.name); //获取窗口索引		var specs = 0;		var paperArr = localStorage.getItem('paperArr');		if(paperArr==null){			paperArr = [];		}		console.log(paperArr);		$('input[name="papername"]').val('');		$('input[name="color"]').val('');		$('input[name="KeZhong"]').val('');		$('input[name="price"]').val('');				$('.specschoose').on('tap',function(){			$(this).addClass('active');			specs = $(this).attr('index');			$(this).siblings().removeClass('active');			if(specs == 2){				$('.specialhidenum').css('display','inline-block');				var pricehtml = '<font>特规纸张不支持自动报价，请联系客服人员</font>'				$('.price').html(pricehtml);			}else{				$('.specialhidenum').css('display','none');				var pricehtml = '<font>价格</font>'+					'<input style="width: 20%;" type="number" name="price" id="price" value="" />/张';					$('.price').html(pricehtml);			}		})		var papername = '';//		paperlist();		function paperlist(){			$('#customPapers').show();			$.ajax({				type:"get",				dataType:'json',				url:ajaxUrlPath+"/mobile/enquiryOrder/selfPaperRecord",				data:{					key:papername,				},				success:function(data){					console.log(data);					var html ='';					if(data.code == 0){						for (var i = 0; i < data.result.length; i++) {							html += '<div papername="'+data.result[i].name+'" color="'+data.result[i].color+'" KeZhong="'+data.result[i].weight+'" GuiGe="'+data.result[i].normal+'" price="'+data.result[i].price+'" selfPaperLength="'+data.result[i].selfPaperLength+'" selfPaperWidth="'+data.result[i].selfPaperWidth+'">'+				'<p>'+data.result[i].name+'<img src="img/cookie.png"/></p>'+				'<p><span>'+data.result[i].color+'</span> <span>'+data.result[i].weight+'克</span><span>'+data.result[i].normal+'</span>'				if(data.result[i].selfPaperLength!=null){					html = html+'<span>'+ data.result[i].selfPaperLength+'X'+data.result[i].selfPaperWidth+'</span></p></div>'				}else{					html = html + '</p></div>'				}													}					}						$('#customPapers').html(html);					$('#customPapers').find('div').on('click',function(){						console.log(222);						var papername = $(this).attr('papername');						var color = $(this).attr('color');						var KeZhong = $(this).attr('KeZhong');						var GuiGe = $(this).attr('GuiGe');						var price = $(this).attr('price');						var selfPaperWidth = $(this).attr('selfPaperWidth');						var selfPaperLength = $(this).attr('selfPaperLength');						$('input[name="papername"]').val(papername);						$('input[name="KeZhong"]').val(KeZhong);						$('input[name="color"]').val(color);												if(GuiGe=='标规'){							specs = 0;							$('.specschoose').eq(0).addClass('active');							$('.specschoose').eq(0).siblings().removeClass('active');							var pricehtml = '<font>价格</font>'+							'<input style="width: 20%;" type="number" name="price" id="price" value="" />/张';							$('.price').html(pricehtml);							$('.specialhidenum').css('display','none');						}else if(GuiGe =='大规'){							specs = 1;							$('.specschoose').eq(1).addClass('active');							$('.specschoose').eq(1).siblings().removeClass('active');							var pricehtml = '<font>价格</font>'+							'<input style="width: 20%;" type="number" name="price" id="price" value="" />/张';							$('.price').html(pricehtml);							$('.specialhidenum').css('display','none');						}else if(GuiGe == '特规'){							specs = 2;							$('.specschoose').eq(2).addClass('active');							$('.specschoose').eq(2).siblings().removeClass('active');							var pricehtml = '<font>特规纸张不支持自动报价，请联系客服人员</font>'							$('.price').html(pricehtml);							$('.specialhidenum').css('display','inline-block');							$('input[name="selfPaperWidth"]').val(selfPaperWidth);							$('input[name="selfPaperLength"]').val(selfPaperLength);						}						$('#customPapers').hide();					})				}			})		}		$('input[name="papername"]').on('input propertychange', function(event){		   console.log(111);		   papername = $('input[name="papername"]').val();		   console.log(papername);		   paperlist();		  			});				
		$('#sureButton').on('tap',function(){						var type = $('input[name="papername"]').val();			var color = $('input[name="color"]').val();			var KeZhong = $('input[name="KeZhong"]').val();			var price = '';			var selfPaperLength = '';			var selfPaperWidth = '';			if(specs!=2){				price = $('input[name="price"]').val();				if(type=='' || color=='' || KeZhong=='' || price==''){					console.log(222);					mui.toast('请完善纸张信息')					return false;									}else{										parent.$('#sureButton').attr('papertype',type);					parent.$('#sureButton').attr('color',color);					parent.$('#sureButton').attr('KeZhong',KeZhong);					parent.$('#sureButton').attr('price',price);					parent.$('#sureButton').attr('specs',specs);					parent.layer.close(index);					parent.$('#sureButton').trigger('tap');				}			}else{				selfPaperLength = $('input[name="selfPaperLength"]').val()				selfPaperWidth = $('input[name="selfPaperWidth"]').val()				if(type=='' || color=='' || KeZhong=='' || selfPaperLength=='' || selfPaperWidth == ''){					console.log(222);					mui.toast('请完善纸张信息')					return false;									}else{										parent.$('#sureButton').attr('papertype',type);					parent.$('#sureButton').attr('color',color);					parent.$('#sureButton').attr('KeZhong',KeZhong);					parent.$('#sureButton').attr('selfPaperLength',selfPaperLength);					parent.$('#sureButton').attr('selfPaperWidth',selfPaperWidth);					parent.$('#sureButton').attr('specs',specs);					parent.layer.close(index);					parent.$('#sureButton').trigger('tap');				}			}			console.log(type+','+color+','+KeZhong+','+price+','+specs)											})		
	</script>
	
</html>
