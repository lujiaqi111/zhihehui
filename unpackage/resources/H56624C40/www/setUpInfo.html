<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0" />
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<meta name="format-detection" content="telephone=no">
		<title>印刷通-报价</title>		<link rel="stylesheet" type="text/css" href="css/mui.min.css"/>
		<link rel="stylesheet" type="text/css" href="css/rem.css"/>
		<link rel="stylesheet" type="text/css" href="css/initialization1.css"/>		<style type="text/css">			body,html{				background-color: #f2f2f2;				width: 100%;				height: 100%;							}			.logo{				width: 60px;				height: 60px;				border: 1px solid #FFFFFF;				border-radius: 50%;				margin:20px 10px;				background-size: cover;				border-radius: 50%;			}			.left{				width: 80px;				height: 100px;				float: left;			}			.right{				width: auto;			}			.right p{				color:#888888			}			.name{				line-height: 60px;				font-size: 20px;				color: #FFFFFF;				font-weight: inherit;			}			.company{				line-height: 20px;				color: #FFFFFF;				font-weight: inherit;			}			.box{				width: 90%;				min-height: 50px;				background-color: #FFFFFF;				margin-left: 5%;				margin-top: 10px;				border: 1px solid rgba(0,0,0,0.2);				border-radius: 5px;				padding-left: 20px;			}			.box>p{				line-height: 50px;				text-align: left;							}			.box p span:nth-child(2){				margin-left: 10px;				color: #FF6600;			}			.title{				padding: 20px 20px 0px;			}			h3.header{				background-color: #f2f2f2;				color: #888888;			}			.logo img{				width: 60px;				height: 60px;				border-radius: 30px;			}			.set{				text-align: center;				display: inline-block;				width: 80%;			}			.logOut{				position: fixed;				bottom: 20px;				width: 80%;				margin-left: 10%;				background-color: #FF6600;				color: #FFFFFF;				border: 0px;				border-radius: 6px;				line-height: 45px;
				height: 46px;
				text-align: center;
				font-size: 16px;			}			.left{				position: relative;			}			#headerimg{				position: absolute;				top: 40px;				opacity: 0;			}
		</style>		
	</head>
	<body>
		<h3 class="header"><span class="back back1"><img  style="height: 20px;padding-right:10px ;" src="img/bbtn.png"/></span><span class="set">设置</span></h3>		<p class="title">个人资料</p>		<div class="box" style="height: 100px;">			<div class="left">				<div class="logo">					<img id="headimg" src=""/>					<input type="file" name="headerimg" id="headerimg" value="" />				</div>			</div>			<div class="right">				<p class="name userName"></p>				<p class="company companyName"></p>			</div>		</div>		<div class="box">			<p>				<span>电话</span><span class="mobile"></span>			</p>
		</div>		<div class="box updatePassword">			<p>				<span>修改密码</span>			</p>		</div>						<div class="logOut">退出登录</div>
	</body>
	<script type="text/javascript" src="js/jquery.min.js"></script>	<script type="text/javascript" src="js/mui.min.js"></script>
	<script type="text/javascript" src="js/layer3.0.1/layer.js"></script>
	<script src="js/pages/share.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript" src="js/pages/other-Materials.js"></script>	<script type="text/javascript">		$('.back').on('click',function(){			console.log(111);				location.href = 'myselfinfo.html';			})		document.addEventListener('plusready', function(){
   			//console.log("所有plus api都应该在此事件发生后调用，否则会出现plus is undefined。"
		});		
//		       扩展API加载完毕后调用onPlusReady回调函数
//		document.addEventListener('plusready', onPlusReady, false);
//			// 扩展API加载完毕，现在可以正常调用扩展API
//			function onPlusReady(){
//				// 获取apk/ipa版本号
////				alert('Application(apk/ipa) version：' + plus.runtime.version);
//				$('.system').html('v1.'+plus.runtime.version);
//		}				$.ajax({					type:"post",					url:ajaxUrlPath+"/mobile/member/getById",					async:true,					data:{						userId:localStorage.getItem('memberId'),						type:0,					},					success:function(data){						console.log(JSON.stringify(data));						if(data.code==0){							if(data.result.schedule==1){								$('.schedule').html('早班')							}else if(data.result.schedule==2){								$('.schedule').html('晚班')							}else{								$('.schedule').html(' ')							}							var logo = '';							if(data.result.logo=='' || data.result.logo == null){								logo = 'img/header.png'							}else{								logo = data.result.logo							}							$('.logo').css('background-image','url('+logo+')')							$('#headimg').attr('src',logo)							$('.userName').html(data.result.userName);							$('.mobile').html(data.result.mobile);							var authorityType = '';							if(data.result.authorityType == 1){								authorityType = '老板'							}else if(data.result.authorityType == 2){								authorityType = '业务员'							}else if(data.result.authorityType == 3){								authorityType = '前台'							}else if(data.result.authorityType == 4){								authorityType = '财务'							}else if(data.result.authorityType == 5){								authorityType = '仓库'							}else if(data.result.authorityType == 6){								authorityType = '印刷'							}else if(data.result.authorityType == 7){								authorityType = '制版'							}else if(data.result.authorityType == 8){								authorityType = '切纸'							}else if(data.result.authorityType == 9){								authorityType = '覆膜'							}else if(data.result.authorityType == 10){								authorityType = 'UV/印刷'							}else if(data.result.authorityType == 11){								authorityType = '烫印'							}else if(data.result.authorityType == 12){								authorityType = '凹凸'							}else if(data.result.authorityType == 13){								authorityType = '模切'							}else if(data.result.authorityType == 14){								authorityType = '糊盒'							}else if(data.result.authorityType == 15){								authorityType = '喷码'							}else if(data.result.authorityType == 16){								authorityType = '装箱'							}else if(data.result.authorityType == 17){								authorityType = '手工'							}else if(data.result.authorityType == 18){								authorityType = '拆边'							}else if(data.result.authorityType == 19){								authorityType = '品检'							}else if(data.result.authorityType == 20){								authorityType = 'QC'							}							$('.companyName').html(authorityType)						}else{							mui.toast(data.message);						}					}									});		$('.updatePassword').on('click',function(){			console.log(111);				location.href = 'updatepassword.html';			})		$('.logOut').on('tap',function(){			if (confirm("你确定退出登录吗？")) {  	            localStorage.clear();	            location.href = 'adminlogin.html'	        }  	        else {  	            	        }  		})				$(function(){			var inputFile = document.getElementById('headerimg')						// 监听文件改变			inputFile.addEventListener('click', function() {this.value = null;}, false);			inputFile.addEventListener('change', readData, false);					})		function readData(evt) {			evt.stopPropagation();			evt.preventDefault();					var formData = new FormData();			formData.append('image', $('#headerimg')[0].files[0]); 			formData.append('type', 1); 			$.ajax({				url: ajaxUrlPath+ '/mobile/image/saveImage',				type: "POST",				data: formData,				contentType: false,				processData: false,				success: function (data) {					console.log(data)					if(data.code == 0){						$('#headimg').attr('src',data.result.viewUrl);						var imgurl = data.result.viewUrl;						$.ajax({							type:"post",							dataType:'json',							url:ajaxUrlPath+"/mobile/sellerUser/update",							data:{								userId:localStorage.getItem("memberId"),								logo:imgurl							},							success:function(data){								alert('头像更换成功')							}						})					}	   				},				error: function () {					alert("上传失败！"); 				}			});							}		function cropAndUploadImage(base64){					var b64 = base64.split(",")[1];//			var load = layerLoad();			alert(b64);			$.ajax({				url: ajaxUrlPath+ '/mobile/image/saveImage',				type: "post",				data:{					photo : b64,				},				dataType: 'json',				success:function(data) {					if(data.success){						setTimeout(function(){							window.location.reload();						},1000);											}else {						layerOpen(date.error);					}				},  				error : function() {  					// view("异常！");//					layerAlert("图片上传超时！");				} 			})		 }				
	</script>
</html>
