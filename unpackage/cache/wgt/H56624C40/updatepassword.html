<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0" />
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<meta name="format-detection" content="telephone=no">
		<title>印刷通-报价</title>		<link rel="stylesheet" type="text/css" href="css/mui.min.css"/>
		<link rel="stylesheet" type="text/css" href="css/rem.css"/>
		<link rel="stylesheet" type="text/css" href="css/initialization1.css"/>		<style type="text/css">			body,html{				background-color: #f2f2f2;				width: 100%;				height: 100%;							}			.logo{				width: 60px;				height: 60px;				border: 1px solid #FFFFFF;				border-radius: 50%;				margin:20px 10px;				background-size: cover;			}			.left{				width: 80px;				height: 100px;				float: left;			}			.right{				width: auto;			}			.right p{				color:#888888			}			.name{				line-height: 60px;				font-size: 20px;				color: #FFFFFF;				font-weight: inherit;			}			.company{				line-height: 20px;				color: #FFFFFF;				font-weight: inherit;			}			input.password{				width: 90%;				min-height: 45px;				background-color: #FFFFFF;				margin-left: 5%;				border: 1px solid rgba(0,0,0,0.2);				border-radius: 5px;				padding-left: 20px;				text-align: left;			}			.box>p{				line-height: 50px;				text-align: left;							}			.box p span:nth-child(2){				margin-left: 10px;				color: #FF6600;			}			.title{				padding: 20px 20px 0px;			}			h3.header{				background-color: #f2f2f2;				color: #888888;			}			.logo img{				width: 60px;				height: 60px;			}			.set{				text-align: center;				display: inline-block;				width: 80%;			}			#submit{				width: 80%;				background-color: #FF6600;				color: #FFFFFF;				line-height: 30px;				margin-left: 10%;				border: 0px;				border-radius: 6px;				margin-top: 10px;			}
		</style>		
	</head>
	<body>
		<h3 class="header"><span class="back back1"><img  style="height: 20px;padding-right:10px ;" src="img/bbtn.png"/></span><span class="set">修改密码</span></h3>				<input type="text" class="password" name="" id="oldpassword" value="" placeholder="请输入旧密码"/>		<input type="text" class="password" name="" id="newpassword" value="" placeholder="请输入新密码"/>		<input type="text" class="password" name="" id="resetpassword" value="" placeholder="请重复新密码"/>
		<button id="submit">提交</button>	</body>
	<script type="text/javascript" src="js/jquery.min.js"></script>	<script type="text/javascript" src="js/mui.min.js"></script>
	<script type="text/javascript" src="js/layer3.0.1/layer.js"></script>
	<script src="js/pages/share.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript" src="js/pages/other-Materials.js"></script>	<script type="text/javascript">		$('.back').on('click',function(){			console.log(111);				location.href = 'setUpInfo.html';			})
		$('#submit').on('tap',function(){			var oldpassword = $('#oldpassword').val();			var newpassword = $('#newpassword').val();			var resetpassword = $('#resetpassword').val();			if(newpassword == ''){				alert('请填写新密码');				return false;			}			if(newpassword != resetpassword){				alert('新密码两遍不一致');				return false;			}			if(newpassword == oldpassword){				alert('新密码不可和旧密码一致');				return false;			}			$.ajax({					type:"post",					url:ajaxUrlPath+"/mobile/member/validatePassword",					async:false,					data:{						userId:localStorage.getItem('memberId'),						password:oldpassword,					},					success:function(data){						console.log(data);						if(data.code === 0){							$.ajax({								type:"post",								url:ajaxUrlPath+"/mobile/member/updatePassword",								async:false,								data:{									id:localStorage.getItem('memberId'),									oldPassword:oldpassword,									password:newpassword,									type:0								},								success:function(data){									console.log(data);									if(data.code == 0){										mui.toast('密码修改成功');										$.ajax({										type:"post",										url:ajaxUrlPath+"/mobile/member/newLogin",										async:false,										data:{											sellerId:10,											account:localStorage.getItem('userName'),											password:newpassword,											type:0																					},										success:function(data){											console.log(JSON.stringify(data));											if(data.code==0){												localStorage.setItem('indexItem',0);												localStorage.setItem("memberId",data.result.id);												localStorage.setItem('userName',data.result.account);						          				localStorage.setItem('companyName',data.result.companyName);						          				localStorage.setItem('authorityType',data.result.authorityType);						          				localStorage.setItem('sellerId',10);						          				if(data.result.authorityType==4){						          					window.location.href='orderlist.html'						          				}else if(data.result.authorityType==6){						          					window.location.href='stockorderlist.html'						          				}else if(data.result.authorityType==10){						          					window.location.href='instockorderlist.html'						          				}else if(data.result.authorityType==13){						          					window.location.href='adminwaitorderlist.html'						          				}																							}else{												mui.toast(data.message);											}																					}									});									}								}							})						}else{							alert('旧密码填写错误');						}					}				})		})						
	</script>
</html>
