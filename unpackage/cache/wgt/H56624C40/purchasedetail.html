<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0" />
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<meta name="format-detection" content="telephone=no">
		<title>印刷通-报价</title>		<link rel="stylesheet" type="text/css" href="css/mui.min.css"/>
		<link rel="stylesheet" type="text/css" href="css/rem.css"/>		
		<link rel="stylesheet" type="text/css" href="css/initialization1.css"/>		<style type="text/css">			body,html{				background-color: #FFFFFF;			}
			.ordernum{				display: inline-block;				float: right;				text-align: right;				padding-right: 20px;				line-height: 24px;			}			.back img{				height: 24px;				padding-right:6px ;				display: inline-block;				line-height: 24px;			}			.status{				color: #ff7206;				line-height: 30px;			}			.papercol span:nth-child(1){				/*padding: 1.0rem ;*/			}			.orderstatus button{				color: #FFFFFF;				background-color: #ff6f00;				border: 0px;				border-radius: 6px;				float: right;				margin-right: 10px;			}			#grant{				background-color: #CCCCCC;			}			#picking{				margin-right: 20px;			}			.orderdetail p.ordercol{				padding-left: 20px;				line-height: 30px;			}			.orderdetail p>span.detailcol{				margin-left: 6px;				color: #ff6f00;			}			.otherrequire{				float: right;				display: inline-block;				margin-right: 50px;			}			.mui-collapse{				background-color: #808080;				color: #FFFFFF;				font-size: 1.6rem;			}			.mui-navigate-right:after, .mui-push-left:after, .mui-push-right:after{				font-size: 2.0rem;				color: #FFFFFF;			}			.mui-table-view-cell.mui-active{				background-color: #ff6f00;			}			.mui-collapse .papercol{				padding: 0.5rem 0rem;			}			.mui-table-view-cell.mui-collapse .mui-collapse-content{				padding: 8px 0px;			}			.ordercol button{				border: 0px;				border-radius: 6px;				background-color: #ff6f00;				color: #FFFFFF;				margin: 10px 5px;				margin-left: 8%;			}			#pbfinish,#qzfinish1,#qzfinish2,#qzallFeeding,			#ysfinish1,#ysaddlogs,#ysfinish3,#ysfinish4,			#bcpfinish1,#bcpaddlogs2{				margin-right: 20px;			}			.orderdetail p.bigline{				line-height: 40px;			}			.mui-table-view-cell:after{				height: 0px;			}			.mui-table-view-cell{				margin-bottom: 6px;				padding: 8px 15px;			}			.step li{				width: 100%;				height: 60px;				margin-bottom: 10px;				background-color: #f2f2f2;			}			.step li div.left{				float: left;				width: 15%;				vertical-align: middle;				text-align: center;				font-size: 30px;				height: 50px;				line-height: 50px;				color: #8b8b8b;			}			.step li div.oneleft{				float: left;				width: 15%;				vertical-align: middle;				text-align: center;				font-size: 40px;				height:80px;				line-height: 80px;				color: #8b8b8b;			}			.step li div.right{				float: left;				width: 85%;				min-height: 40px;				/*clear: both;*/			}			.step li div.oneright{				float: left;				width: 60%;				height: 40px;				/*clear: both;*/			}			.step li div.oneright p{				line-height: 30px;				margin-top: 5px;			}			.step li div.right p{				line-height: 30px;			}			.step li div.right p span{				padding-right: 3px;			}			.step li div.right p:nth-child(1){				margin-top: 10px;			}			.step li div.right p font{				color: #ff6f00;			}			.step li div.right p>span:nth-child(1){				font-size: 20px;				color: #ff6f00;			}			.step li div.right p>span:nth-child(1) img{				width: 16px;				height: 16px;				display: inline-block;				margin-top: -20px;				margin-left: -5px;			}			.step li div.oneright p:nth-child(1) span img{				width: 16px;				height: 16px;				display: inline-block;				margin-top: -20px;				margin-left: -5px;			}			.step li div.right p span:nth-child(2){				font-size: 20px;				/*color: #009ddf;*/			}			.step li div.right p span:nth-child(3){				font-size: 20px;				/*color: #e30d6e;*/			}			.step li div.right p span:nth-child(4){				font-size: 20px;				/*color: #fce908;*/			}			.step li div.right p span:nth-child(5){				font-size: 20px;				/*color: #19171a;*/			}			.step li div.right p button{				border: 0px;				border-radius: 6px;				background-color: #FF6F00;				color: #FFFFFF;				display: inline-block;				float: right;				margin-right: 20px;				padding: 4px 10px;				width: 62px;			}			.step li .btn button{				border: 0px;				border-radius: 6px;				background-color: #FF6F00;				color: #FFFFFF;				display: inline-block;				float: right;				margin-right: 20px;				padding: 4px 10px;				margin-top: 25px;			}			.stepbtn{				width: 100%;				height: 30px;			}			.stepbtn img{				float: right;				display: inline-block;				height: 10px;				width: auto;				margin-right: 30px;			}			.chuku{				border: 0px;				border-radius: 6px;				background-color: #FF6F00;				color: #FFFFFF;				float: right;				margin-right: 20px;				padding: 6px 20px;			}			#stock .papercol:after{				height: 0px;			}			#stock p{				width: 100%;			}			#stock p span{				display: inline-block;				height: auto;			}			#stock p span:nth-child(1){				width: 30%;			}			#stock p span:nth-child(2){				width: 20%;			}			#stock p span:nth-child(3){				width: 35%;			}						.ordercol ul li{				display: inline-block;				float: left;			}			.orderdetail p>span.col3{
				display: inline-block;
				width: 90px;
			}
			.orderdetail p>span.col4{
				display: inline-block;
				width: 70px;
			}			.orderdetail p>span.col5{				display: inline-block;				width: 90px;			}			.orderdetail p>span{				margin-right: 15px;			}			/*.memo{
				word-break:normal;
			 	white-space:pre-wrap;
			 	word-wrap : break-word ;
			 	overflow: hidden ;
			 	width: 80%;
			 	min-height: 30px;
				display: inline-block;
				line-height: 30px;
				padding-top: 6px;
				} */			#ysstep .right p>span{				margin-right: 5px;			}			.hd{				width: 72px;			}			.bcp{				width: 62px;			}			.header{				position: absolute;			    top: 0;			    width: 100%;			    z-index: 99999;			}			#content{				margin-top: 54px;				overflow: auto;			}			.flexd{				position: fixed;				width: 100%;			}			.ordercol{				position: relative;			}			.isselfPaper{				color: #ff6f00;				display: inline-block;				text-align: right;				position: absolute;				right: 10px;			}			.memo{				display: inline-block;			    line-height: 24px;			    padding: 5px 0;			    margin-right: 10px;			    word-wrap: break-word;			    word-break: break-all;			    overflow: hidden; 			}			.tipdetail{
				width: 55%;
				display: inline-block;
				white-space: nowrap;
				overflow: hidden; 
				text-overflow: ellipsis; 				float: right;
			}			.list{				/*width: 100%;*/				height: 60px;				/*background-color: antiquewhite;*/				/*margin-top: 54px;*/				overflow-y: scroll;			}			.list li{				width: auto;				/*height: 35px;*/				border: 1px solid #CCCCCC;				border-radius: 5px;				background-color: #CCCCCC;				float: left;				margin-top: 10.5px;				margin-left: 5px;				color: #FFFFFF;				text-align: center;				line-height: 35px;				padding: 0px 5px;							}			.active{				background-color: #FF6F00;			}			.bigline button{				width: 35%;			}			textarea{				background-color: #FFFFFF;				min-height: 150px;				color: #000000;				font-size: 16px;				line-height: 30px;			}
		</style>
	</head>
	<body>		<h1 class="header">			<span class="back">				<img  style="" src="img/backbtn.png"/>				申购单审核			</span>			<span class="ordernum">No.</span>		</h1>				<div class="container" id="content">			<div class="orderdetail">				<p class="ordercol">					原料：<span class="detailcol name"></span>				</p>				<p class="ordercol">					供应商：<span class="detailcol supplierName"></span>				</p>				<p class="ordercol">					数量：<span class="detailcol num"></span>				</p>				<p class="ordercol">					总价：<span class="detailcol totalPrice"></span>				</p>				<p class="ordercol">					单价：<span class="detailcol price"></span>				</p>				<p class="ordercol">					用途：<span class="detailcol purpose"></span>				</p>				<p class="ordercol">					到货时间：<span class="detailcol arrivalTime"></span>				</p>				<p class="ordercol">					申请人：<span class="detailcol applyUserName"></span>				</p>				<p class="ordercol">					申请时间：<span class="detailcol createTime"></span>				</p>				<p class="ordercol">					备注<span class="detailcol memos"></span>				</p>				<p class="ordercol">					审核意见：<textarea name="mark"></textarea>				</p>							</div>			  <div>			        <p class="ordercol bigline">						<button id="unpass" class="pass" status="0">驳回</button>						<button id="pass" class="pass" status="1">通过</button>			        </p>				</div>		</div>
		
	</body>
	<script src="js/jquery.min.js" type="text/javascript" charset="utf-8"></script>	<script src="js/mui.min.js" type="text/javascript" charset="utf-8"></script>	<script type="text/javascript" src="js/template-native.min.js"></script>	<!--<script type="text/javascript" src="js/immersed.js"></script>-->	<script type="text/javascript" src="js/pages/share.js"></script>
	<script type="text/javascript" src="js/layer3.0.1/layer.js"></script>	<script type="text/javascript">				$('.back').on('tap',function(){			window.location = 'purchaselist.html';		})				$('.scan').on('tap',function(){			window.location = 'scan.html';		})		$('.myself').on('tap',function(){			window.location = 'myselfinfo.html';		})		         		$(function() {
           //先刷新页面
            pushHistory(); 
    	   //再进行操作
            window.addEventListener("popstate", function(e) { 
    		 location.href = 'orderlist.html';
    	   }, false); 
    	   function pushHistory() { 
    	     var state = { 
    	       title: "title", 
    	       url: "#"
    	     }; 
    	     window.history.pushState(state, "title", "#"); 
    	   } 
            })		function getUrlParam(name) {			    var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)"); //构造一个含有目标参数的正则表达式对象			    var r = window.location.search.substr(1).match(reg);  //匹配目标参数			    if (r != null) return decodeURI(r[2]); return null; //返回参数值		}		window.onload = function(){			var activeAry = [];			var result = getUrlParam('result');			var workOrderId = '';			if(!isNaN(result)){				workOrderId = result;			}else{				workOrderNo = result;			}						console.log(workOrderId)			$.ajax({				type:"post",				dataType:'json',				url:ajaxUrlPath+"/mobile/material/apply/getById",				data:{					id:workOrderId				},				success:function(data){					console.log(JSON.stringify(data));						$('.ordernum').html('No.'+data.applyNo);
						$('.name').html(data.brand+' '+data.name+' '+data.normal+' '+(data.normal=="标规"?"":(data.length+'*'+data.width))+' '+data.weight);						$('.num').html(data.num);						$('.price').html(data.price);						$('.supplierName').html(data.supplierName);						$('.totalPrice').html(data.totalPrice);						if(data.purpose == 1){							$('.purpose').html('增加库存');						}else if(data.purpose == 2){							$('.purpose').html('订单采购');						}else if(data.purpose == 3){							$('.purpose').html('其他');						}else{							$('.purpose').html('');						}						$('.arrivalTime').html(data.arrivalTime);						$('.memos').html(data.memo);						$('.applyUserName').html(data.applyUserName);						$('.createTime').html(data.createTime);						$('#pass').attr('objId',data.id);						$('#unpass').attr('objId',data.id);				}														})						$('.pass').on('tap',function(){				var id  = $(this).attr('objId');				var status = $(this).attr('status');				var type = 1;				var mark = $('textarea[name="mark"]').val();				$.ajax({					type:"post",					dataType:'json',					url:ajaxUrlPath+"/mobile/material/apply/updateStatus",					data:{						id:id,						status:status,						type:type,						mark:mark					},					success:function(data){						alert('审核通过')						console.log(data+'ceshi');						window.location = 'purchaselist.html';					},					error:function(data){						console.log(data+'ceshi');//						window.location = 'purchaselist.html';					},									})			})                     }
	</script></html>
